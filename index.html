<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Molecular Viewer</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: black; }
        model-viewer { width: 100%; height: 100vh; }
    </style>
</head>
<body>
    <model-viewer
        id="ar-model"
        ar
        ar-modes="webxr scene-viewer quick-look"
        camera-controls
        ar-scale="auto"
        xr-environment
    >
        <div class="progress-bar hide" slot="progress-bar">
            <div class="update-bar"></div>
        </div>
    </model-viewer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const pdbId = urlParams.get('id');
            const modelViewer = document.getElementById('ar-model');
            
            if (pdbId) {
                // Use the 3Dmol viewer as the source for the model-viewer component
                modelViewer.setAttribute('src', `https://3dmol.org/viewer.html?pdb=${pdbId}&select=*&style=cartoon&gl=1`);
            }
        });
    </script>
</body>
</html>
